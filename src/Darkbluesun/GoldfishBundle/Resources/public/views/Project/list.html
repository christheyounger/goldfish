<div class="container-fluid">
	<div class="row">
		<div class="col-md-10 col-md-offset-1">
			<h1>Projects</h1>
			<table class="table table-striped">
				<thead>
					<tr>
						<td colspan="10">
							<div class="row">
								<div class="col-md-6">
									<label for="query">Search:&nbsp;</label><input type="text" ng-model="query" id="query">
								</div>
								<div class='col-md-6' style="text-align:right;">
									<label for="orderProp">Order:&nbsp;</label>
									<select ng-model="orderProp" id="orderProp">
										<option value="client.name">Client</option>
										<option value="name">Project</option>
										<option value="due.timestamp">Due</option>
										<option value="budget">Budget</option>
									</select>
								</div>
							</div>
						</td>
					</tr>
					<tr>
						<th>Client</th>
						<th>Project</th>
						<th>Due</th>
						<th>Budget</th>
					</tr>
				</thead>
				<tbody>
					<tr class="done-{{project.done}}" ng-repeat="project in projects | filter:query | orderBy:orderProp">
						<td ng-if="!project.editing"><a href="#/clients/{{project.client.id}}">{{project.client.companyName}}</a></td>
						<td ng-if="project.editing">
							<select ng-model="project.client" ng-options="client as client.companyName for client in clients track by client.id">
								<option>None</option>
							</select>
						</td>
						<td ng-if="!project.editing"><a href="#/projects/{{project.id}}">{{project.name}}</a></td>
						<td ng-if="project.editing"><input type="text" class="form-control" ng-model="project.name"></td>
						<td ng-if="!project.editing">{{project.dueDate.string}}</td>
						<td ng-if="project.editing"><input type="date" class="form-control" ng-model="project.dueDate"></td>
						<td ng-if="!project.editing"><a href="mailto:{{client.email}}">${{project.budget}}</a></td>
						<td ng-if="project.editing"><input type="number" class="form-control" ng-model="project.budget"></td>
						<td class="btn-group" role="group">
							<button class="btn btn-sm btn-default" ng-if="!project.editing" data-ng-click="project.editing=true"><i class="fa fa-edit"> </i></button>
							<button class="btn btn-sm btn-success" ng-if="project.editing" data-ng-click="saveProject(project)"><i class="fa fa-save"> </i></button>
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td><a data-ng-click="addProject()" class="btn btn-sm btn-primary"><i class="fa fa-plus"> </i> New</a></td>
					</tr>
				</tfoot>
			</table>
		</div>
    </div>
  </div>
</div>